import {IRoboAst} from "../../../../models/programTypes";
import {standardPlayerShipIds} from "../../../constants/standardShipIds";

/*
def Start():
    playerShipId = 'override'
    nextCount = 6
    count = 7
    dir = 'left'
    while nextCount > -1:
        while count > 0:
            if isPlayerMisplaced(dir, playerShipId):
                reactToMisplacedPlayer(dir, playerShipId)
            fly
            count = (count - 1)
        count = nextCount
        nextCount = (nextCount - 1)
        makeTurn(dir, playerShipId)
        dir = calculateTurnedDir(dir)

def isPlayerMisplaced(dir, playerShipId):
    if dir == 'left':
        x = -2
        y = 1
    if dir == 'down':
        x = 1
        y = 2
    if dir == 'right':
        x = 2
        y = -1
    if dir == 'up':
        x = -1
        y = -2
    playerX = (Tile[position of ship playerShipId].x + 0)
    playerY = (Tile[position of ship playerShipId].y + 0)
    aiX = (Tile[~x,~y].x + 0)
    aiY = (Tile[~x,~y].y + 0)
    return boolean ((playerX != aiX or playerY != aiY) or direction of ship playerShipId != dir)


def makeTurn(dir, playerShipId):
    if isPlayerInFront(dir, playerShipId):
            shoot
    fly
    if isPlayerInFront(dir, playerShipId):
            shoot
    fly
    if isPlayerInFront(dir, playerShipId):
            shoot
    turn-left
    dir = calculateTurnedDir(dir)
    if isPlayerInFront(dir, playerShipId):
            shoot
    if isPlayerMisplaced(dir, playerShipId):
        left

def calculateTurnedDir(oldDir):
    if oldDir == 'left':
        return string 'down'
    if oldDir == 'down':
        return string 'right'
    if oldDir == 'right':
        return string 'up'
    return string 'left'

def reactToMisplacedPlayer(dir, playerShipId):
    playerX = (Tile[position of ship playerShipId].x + 0)
    playerY = (Tile[position of ship playerShipId].y + 0)
    if (dir == 'right' or dir == 'left'):
        if playerY == Tile[~0,~0].y:
            shoot
    else:
        if playerX == Tile[~0,~0].x:
            shoot

def isPlayerInFront(dir, playerShipId):
    playerX = (Tile[position of ship playerShipId].x + 0)
    playerY = (Tile[position of ship playerShipId].y + 0)
    if (dir == 'right' or dir == 'left'):
        if playerY == Tile[~0, ~0].y:
            return boolean true
    else:
        if playerX == Tile[~0, ~0].x:
            return boolean true
    return boolean false
* */
export const labyrinthRightHandPlayerStrategy: IRoboAst = JSON.parse(`[{"head":"start","body":[{"statement":{"head":"setVariable","name":"playerShipId","value":{"head":"constant_string","value":"${standardPlayerShipIds.get(0)}"}},"location":2},{"statement":{"head":"setVariableNumeric","name":"nextCount","value":{"head":"constant_number","value":6}},"location":3},{"statement":{"head":"setVariableNumeric","name":"count","value":{"head":"constant_number","value":7}},"location":4},{"statement":{"head":"setVariable","name":"dir","value":{"head":"constant_string","value":"left"}},"location":5},{"statement":{"head":"while","test":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"nextCount"},"rightValue":{"head":"constant_number","value":-1},"comparator":">"},"body":[{"statement":{"head":"while","test":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"count"},"rightValue":{"head":"constant_number","value":0},"comparator":">"},"body":[{"statement":{"head":"if","test":{"head":"function_call_boolean","name":"isPlayerMisplaced","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"body":[{"statement":{"head":"function_call_void","name":"reactToMisplacedPlayer","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"location":9}],"orelse":null},"location":8},{"statement":{"head":"fly"},"location":10},{"statement":{"head":"setVariableNumeric","name":"count","value":{"head":"number_binary","operator":"-","leftValue":{"head":"getNumericVariable","name":"count"},"rightValue":{"head":"constant_number","value":1}}},"location":11}]},"location":7},{"statement":{"head":"setVariable","name":"count","value":{"head":"getStringVariable","name":"nextCount"}},"location":12},{"statement":{"head":"setVariableNumeric","name":"nextCount","value":{"head":"number_binary","operator":"-","leftValue":{"head":"getNumericVariable","name":"nextCount"},"rightValue":{"head":"constant_number","value":1}}},"location":13},{"statement":{"head":"function_call_void","name":"makeTurn","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"location":14},{"statement":{"head":"setVariable","name":"dir","value":{"head":"function_call_string","name":"calculateTurnedDir","parameters":[{"value":{"head":"getStringVariable","name":"dir"}}]}},"location":15}]},"location":6}]},{"head":"function_definition","name":"isPlayerMisplaced","body":[{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"left"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":-2}},"location":19},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":1}},"location":20}],"orelse":null},"location":18},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"down"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":1}},"location":22},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":2}},"location":23}],"orelse":null},"location":21},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"right"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":2}},"location":25},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":-1}},"location":26}],"orelse":null},"location":24},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"up"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":-1}},"location":28},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":-2}},"location":29}],"orelse":null},"location":27},{"statement":{"head":"setVariableNumeric","name":"playerX","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"x"}},"rightValue":{"head":"constant_number","value":0}}},"location":30},{"statement":{"head":"setVariableNumeric","name":"playerY","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"y"}},"rightValue":{"head":"constant_number","value":0}}},"location":31},{"statement":{"head":"setVariableNumeric","name":"aiX","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"position_value_relative","x":{"head":"getNumericVariable","name":"x"},"y":{"head":"getNumericVariable","name":"y"}},"coordinate":{"head":"constant_string","value":"x"}},"rightValue":{"head":"constant_number","value":0}}},"location":32},{"statement":{"head":"setVariableNumeric","name":"aiY","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"position_value_relative","x":{"head":"getNumericVariable","name":"x"},"y":{"head":"getNumericVariable","name":"y"}},"coordinate":{"head":"constant_string","value":"y"}},"rightValue":{"head":"constant_number","value":0}}},"location":33},{"statement":{"head":"function_return","value":{"head":"logic_binary","comparator":"or","leftValue":{"head":"logic_binary","comparator":"or","leftValue":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"playerX"},"rightValue":{"head":"getNumericVariable","name":"aiX"},"comparator":"!="},"rightValue":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"playerY"},"rightValue":{"head":"getNumericVariable","name":"aiY"},"comparator":"!="}},"rightValue":{"head":"stringCompare","leftValue":{"head":"get_direction_of_ship","shipId":{"head":"getStringVariable","name":"playerShipId"}},"rightValue":{"head":"getStringVariable","name":"dir"},"comparator":"!="}}},"location":34}],"parameters":["dir","playerShipId"]},{"head":"function_definition","name":"makeTurn","body":[{"statement":{"head":"if","test":{"head":"function_call_boolean","name":"isPlayerInFront","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"body":[{"statement":{"head":"shoot"},"location":39}],"orelse":null},"location":38},{"statement":{"head":"fly"},"location":40},{"statement":{"head":"if","test":{"head":"function_call_boolean","name":"isPlayerInFront","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"body":[{"statement":{"head":"shoot"},"location":42}],"orelse":null},"location":41},{"statement":{"head":"fly"},"location":43},{"statement":{"head":"if","test":{"head":"function_call_boolean","name":"isPlayerInFront","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"body":[{"statement":{"head":"shoot"},"location":45}],"orelse":null},"location":44},{"statement":{"head":"turn-left"},"location":46},{"statement":{"head":"setVariable","name":"dir","value":{"head":"function_call_string","name":"calculateTurnedDir","parameters":[{"value":{"head":"getStringVariable","name":"dir"}}]}},"location":47},{"statement":{"head":"if","test":{"head":"function_call_boolean","name":"isPlayerInFront","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"body":[{"statement":{"head":"shoot"},"location":49}],"orelse":null},"location":48},{"statement":{"head":"if","test":{"head":"function_call_boolean","name":"isPlayerMisplaced","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"body":[{"statement":{"head":"left"},"location":51}],"orelse":null},"location":50}],"parameters":["dir","playerShipId"]},{"head":"function_definition","name":"calculateTurnedDir","body":[{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"oldDir"},"rightValue":{"head":"constant_string","value":"left"},"comparator":"=="},"body":[{"statement":{"head":"function_return","value":{"head":"constant_string","value":"down"}},"location":55}],"orelse":null},"location":54},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"oldDir"},"rightValue":{"head":"constant_string","value":"down"},"comparator":"=="},"body":[{"statement":{"head":"function_return","value":{"head":"constant_string","value":"right"}},"location":57}],"orelse":null},"location":56},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"oldDir"},"rightValue":{"head":"constant_string","value":"right"},"comparator":"=="},"body":[{"statement":{"head":"function_return","value":{"head":"constant_string","value":"up"}},"location":59}],"orelse":null},"location":58},{"statement":{"head":"function_return","value":{"head":"constant_string","value":"left"}},"location":60}],"parameters":["oldDir"]},{"head":"function_definition","name":"reactToMisplacedPlayer","body":[{"statement":{"head":"setVariableNumeric","name":"playerX","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"x"}},"rightValue":{"head":"constant_number","value":0}}},"location":63},{"statement":{"head":"setVariableNumeric","name":"playerY","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"y"}},"rightValue":{"head":"constant_number","value":0}}},"location":64},{"statement":{"head":"if","test":{"head":"logic_binary","comparator":"or","leftValue":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"right"},"comparator":"=="},"rightValue":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"left"},"comparator":"=="}},"body":[{"statement":{"head":"if","test":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"playerY"},"rightValue":{"head":"get_position_coordinate","position":{"head":"position_value_relative","x":{"head":"constant_number","value":0},"y":{"head":"constant_number","value":0}},"coordinate":{"head":"constant_string","value":"y"}},"comparator":"=="},"body":[{"statement":{"head":"shoot"},"location":67}],"orelse":null},"location":66}],"orelse":{"statement":{"head":"else","body":[{"statement":{"head":"if","test":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"playerX"},"rightValue":{"head":"get_position_coordinate","position":{"head":"position_value_relative","x":{"head":"constant_number","value":0},"y":{"head":"constant_number","value":0}},"coordinate":{"head":"constant_string","value":"x"}},"comparator":"=="},"body":[{"statement":{"head":"shoot"},"location":70}],"orelse":null},"location":69}]},"location":68}},"location":65}],"parameters":["dir","playerShipId"]},{"head":"function_definition","name":"isPlayerInFront","body":[{"statement":{"head":"setVariableNumeric","name":"playerX","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"x"}},"rightValue":{"head":"constant_number","value":0}}},"location":73},{"statement":{"head":"setVariableNumeric","name":"playerY","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"y"}},"rightValue":{"head":"constant_number","value":0}}},"location":74},{"statement":{"head":"if","test":{"head":"logic_binary","comparator":"or","leftValue":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"right"},"comparator":"=="},"rightValue":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"left"},"comparator":"=="}},"body":[{"statement":{"head":"if","test":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"playerY"},"rightValue":{"head":"get_position_coordinate","position":{"head":"position_value_relative","x":{"head":"constant_number","value":0},"y":{"head":"constant_number","value":0}},"coordinate":{"head":"constant_string","value":"y"}},"comparator":"=="},"body":[{"statement":{"head":"function_return","value":{"head":"constant_boolean","value":"true"}},"location":77}],"orelse":null},"location":76}],"orelse":{"statement":{"head":"else","body":[{"statement":{"head":"if","test":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"playerX"},"rightValue":{"head":"get_position_coordinate","position":{"head":"position_value_relative","x":{"head":"constant_number","value":0},"y":{"head":"constant_number","value":0}},"coordinate":{"head":"constant_string","value":"x"}},"comparator":"=="},"body":[{"statement":{"head":"function_return","value":{"head":"constant_boolean","value":"true"}},"location":80}],"orelse":null},"location":79}]},"location":78}},"location":75},{"statement":{"head":"function_return","value":{"head":"constant_boolean","value":"false"}},"location":81}],"parameters":["dir","playerShipId"]}]`);

/*
def Start():
    playerShipId = 'override'
    nextCount = 4
    count = 6
    dir = 'left'
    while nextCount > -1:
        while count > 0:
            checkPlayer(dir, playerShipId)
            fly
            count = (count - 1)
        count = nextCount
        nextCount = (nextCount - 1)
        makeTurn(dir, playerShipId)
        dir = calculateTurnedDir(dir)

def isPlayerMisplaced(dir, playerShipId):
    if dir == 'left':
        x = -2
        y = -1
    if dir == 'down':
        x = -1
        y = 2
    if dir == 'right':
        x = 2
        y = 1
    if dir == 'up':
        x = 1
        y = -2
    playerX = (Tile[position of ship playerShipId].x + 0)
    playerY = (Tile[position of ship playerShipId].y + 0)
    aiX = (Tile[~x,~y].x + 0)
    aiY = (Tile[~x,~y].y + 0)
    return boolean ((playerX != aiX or playerY != aiY) or direction of ship playerShipId != dir)

def checkPlayer(dir, playerShipId):
    if isPlayerMisplaced(dir, playerShipId):
        reactToMisplacedPlayer(dir, playerShipId)

def makeTurn(dir, playerShipId):
    checkPlayer(dir, playerShipId)
    right
    repeat 2:
        if isPMisplacedDuringTurn(dir, playerShipId, dir):
            reactToMisplacedPDuringTurn(dir, playerShipId)
        else:
            do nothing
    if isPMisplacedDuringTurn(dir, playerShipId, calculateTurnedDir(dir)):
        reactToMisplacedPDuringTurn(dir, playerShipId)
    turn-left
    dir = calculateTurnedDir(dir)
    if isPMisplacedAfterTurn(dir, playerShipId):
        while true:
            shoot
    do nothing

def isPMisplacedDuringTurn(dir, playerShipId, expectedDir):
    if dir == 'left':
        x = -1
        y = 0
    if dir == 'down':
        x = 0
        y = 1
    if dir == 'right':
        x = 1
        y = 0
    if dir == 'up':
        x = 0
        y = -1
    playerX = (Tile[position of ship playerShipId].x + 0)
    playerY = (Tile[position of ship playerShipId].y + 0)
    aiX = (Tile[~x,~y].x + 0)
    aiY = (Tile[~x,~y].y + 0)
    return boolean ((playerX != aiX or playerY != aiY) or direction of ship playerShipId != expectedDir)

def isPMisplacedAfterTurn(dir, playerShipId):
    if dir == 'left':
        x = -1
        y = -1
    if dir == 'down':
        x = -1
        y = 1
    if dir == 'right':
        x = 1
        y = 1
    if dir == 'up':
        x = 1
        y = -1
    playerX = (Tile[position of ship playerShipId].x + 0)
    playerY = (Tile[position of ship playerShipId].y + 0)
    aiX = (Tile[~x,~y].x + 0)
    aiY = (Tile[~x,~y].y + 0)
    return boolean ((playerX != aiX or playerY != aiY) or direction of ship playerShipId != dir)

def calculateTurnedDir(oldDir):
    if oldDir == 'left':
        return string 'down'
    if oldDir == 'down':
        return string 'right'
    if oldDir == 'right':
        return string 'up'
    return string 'left'

def isPlayerInFront(dir, playerShipId):
    playerX = (Tile[position of ship playerShipId].x + 0)
    playerY = (Tile[position of ship playerShipId].y + 0)
    if (dir == 'right' or dir == 'left'):
        if playerY == Tile[~0, ~0].y:
            return boolean true
    else:
        if playerX == Tile[~0, ~0].x:
            return boolean true
    return boolean false

def reactToMisplacedPlayer(dir, playerShipId):
    playerX = (Tile[position of ship playerShipId].x + 0)
    playerY = (Tile[position of ship playerShipId].y + 0)
    if isPlayerInFront(dir, playerShipId):
        shoot
    else:
        right

def reactToMisplacedPDuringTurn(dir, playerShipId):
    playerX = (Tile[position of ship playerShipId].x + 0)
    playerY = (Tile[position of ship playerShipId].y + 0)
    if isPlayerInFront(dir, playerShipId):
        shoot
    else:
        startTurnEscapeHunt(dir, playerShipId)

def startTurnEscapeHunt(dir, playerShipId):
    while true:
        if isPlayerInFront(dir, playerShipId):
            shoot
        else:
            left
* */
export const labyrinthLeftHandPlayerStrategy: IRoboAst = JSON.parse(`[{"head":"start","body":[{"statement":{"head":"setVariable","name":"playerShipId","value":{"head":"constant_string","value":"${standardPlayerShipIds.get(0)}"}},"location":2},{"statement":{"head":"setVariableNumeric","name":"nextCount","value":{"head":"constant_number","value":4}},"location":3},{"statement":{"head":"setVariableNumeric","name":"count","value":{"head":"constant_number","value":6}},"location":4},{"statement":{"head":"setVariable","name":"dir","value":{"head":"constant_string","value":"left"}},"location":5},{"statement":{"head":"while","test":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"nextCount"},"rightValue":{"head":"constant_number","value":-1},"comparator":">"},"body":[{"statement":{"head":"while","test":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"count"},"rightValue":{"head":"constant_number","value":0},"comparator":">"},"body":[{"statement":{"head":"function_call_void","name":"checkPlayer","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"location":8},{"statement":{"head":"fly"},"location":9},{"statement":{"head":"setVariableNumeric","name":"count","value":{"head":"number_binary","operator":"-","leftValue":{"head":"getNumericVariable","name":"count"},"rightValue":{"head":"constant_number","value":1}}},"location":10}]},"location":7},{"statement":{"head":"setVariable","name":"count","value":{"head":"getStringVariable","name":"nextCount"}},"location":11},{"statement":{"head":"setVariableNumeric","name":"nextCount","value":{"head":"number_binary","operator":"-","leftValue":{"head":"getNumericVariable","name":"nextCount"},"rightValue":{"head":"constant_number","value":1}}},"location":12},{"statement":{"head":"function_call_void","name":"makeTurn","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"location":13},{"statement":{"head":"setVariable","name":"dir","value":{"head":"function_call_string","name":"calculateTurnedDir","parameters":[{"value":{"head":"getStringVariable","name":"dir"}}]}},"location":14}]},"location":6}]},{"head":"function_definition","name":"isPlayerMisplaced","body":[{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"left"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":-2}},"location":18},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":-1}},"location":19}],"orelse":null},"location":17},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"down"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":-1}},"location":21},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":2}},"location":22}],"orelse":null},"location":20},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"right"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":2}},"location":24},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":1}},"location":25}],"orelse":null},"location":23},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"up"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":1}},"location":27},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":-2}},"location":28}],"orelse":null},"location":26},{"statement":{"head":"setVariableNumeric","name":"playerX","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"x"}},"rightValue":{"head":"constant_number","value":0}}},"location":29},{"statement":{"head":"setVariableNumeric","name":"playerY","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"y"}},"rightValue":{"head":"constant_number","value":0}}},"location":30},{"statement":{"head":"setVariableNumeric","name":"aiX","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"position_value_relative","x":{"head":"getNumericVariable","name":"x"},"y":{"head":"getNumericVariable","name":"y"}},"coordinate":{"head":"constant_string","value":"x"}},"rightValue":{"head":"constant_number","value":0}}},"location":31},{"statement":{"head":"setVariableNumeric","name":"aiY","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"position_value_relative","x":{"head":"getNumericVariable","name":"x"},"y":{"head":"getNumericVariable","name":"y"}},"coordinate":{"head":"constant_string","value":"y"}},"rightValue":{"head":"constant_number","value":0}}},"location":32},{"statement":{"head":"function_return","value":{"head":"logic_binary","comparator":"or","leftValue":{"head":"logic_binary","comparator":"or","leftValue":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"playerX"},"rightValue":{"head":"getNumericVariable","name":"aiX"},"comparator":"!="},"rightValue":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"playerY"},"rightValue":{"head":"getNumericVariable","name":"aiY"},"comparator":"!="}},"rightValue":{"head":"stringCompare","leftValue":{"head":"get_direction_of_ship","shipId":{"head":"getStringVariable","name":"playerShipId"}},"rightValue":{"head":"getStringVariable","name":"dir"},"comparator":"!="}}},"location":33}],"parameters":["dir","playerShipId"]},{"head":"function_definition","name":"checkPlayer","body":[{"statement":{"head":"if","test":{"head":"function_call_boolean","name":"isPlayerMisplaced","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"body":[{"statement":{"head":"function_call_void","name":"reactToMisplacedPlayer","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"location":37}],"orelse":null},"location":36}],"parameters":["dir","playerShipId"]},{"head":"function_definition","name":"makeTurn","body":[{"statement":{"head":"function_call_void","name":"checkPlayer","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"location":40},{"statement":{"head":"right"},"location":41},{"statement":{"head":"repeat","count":2,"body":[{"statement":{"head":"if","test":{"head":"function_call_boolean","name":"isPMisplacedDuringTurn","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}},{"value":{"head":"getStringVariable","name":"dir"}}]},"body":[{"statement":{"head":"function_call_void","name":"reactToMisplacedPDuringTurn","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"location":44}],"orelse":{"statement":{"head":"else","body":[{"statement":{"head":"noop"},"location":46}]},"location":45}},"location":43}]},"location":42},{"statement":{"head":"if","test":{"head":"function_call_boolean","name":"isPMisplacedDuringTurn","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}},{"value":{"head":"function_call_string","name":"calculateTurnedDir","parameters":[{"value":{"head":"getStringVariable","name":"dir"}}]}}]},"body":[{"statement":{"head":"function_call_void","name":"reactToMisplacedPDuringTurn","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"location":48}],"orelse":null},"location":47},{"statement":{"head":"turn-left"},"location":49},{"statement":{"head":"setVariable","name":"dir","value":{"head":"function_call_string","name":"calculateTurnedDir","parameters":[{"value":{"head":"getStringVariable","name":"dir"}}]}},"location":50},{"statement":{"head":"if","test":{"head":"function_call_boolean","name":"isPMisplacedAfterTurn","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"body":[{"statement":{"head":"while","test":{"head":"constant_boolean","value":"true"},"body":[{"statement":{"head":"shoot"},"location":53}]},"location":52}],"orelse":null},"location":51},{"statement":{"head":"noop"},"location":54}],"parameters":["dir","playerShipId"]},{"head":"function_definition","name":"isPMisplacedDuringTurn","body":[{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"left"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":-1}},"location":58},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":0}},"location":59}],"orelse":null},"location":57},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"down"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":0}},"location":61},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":1}},"location":62}],"orelse":null},"location":60},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"right"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":1}},"location":64},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":0}},"location":65}],"orelse":null},"location":63},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"up"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":0}},"location":67},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":-1}},"location":68}],"orelse":null},"location":66},{"statement":{"head":"setVariableNumeric","name":"playerX","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"x"}},"rightValue":{"head":"constant_number","value":0}}},"location":69},{"statement":{"head":"setVariableNumeric","name":"playerY","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"y"}},"rightValue":{"head":"constant_number","value":0}}},"location":70},{"statement":{"head":"setVariableNumeric","name":"aiX","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"position_value_relative","x":{"head":"getNumericVariable","name":"x"},"y":{"head":"getNumericVariable","name":"y"}},"coordinate":{"head":"constant_string","value":"x"}},"rightValue":{"head":"constant_number","value":0}}},"location":71},{"statement":{"head":"setVariableNumeric","name":"aiY","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"position_value_relative","x":{"head":"getNumericVariable","name":"x"},"y":{"head":"getNumericVariable","name":"y"}},"coordinate":{"head":"constant_string","value":"y"}},"rightValue":{"head":"constant_number","value":0}}},"location":72},{"statement":{"head":"function_return","value":{"head":"logic_binary","comparator":"or","leftValue":{"head":"logic_binary","comparator":"or","leftValue":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"playerX"},"rightValue":{"head":"getNumericVariable","name":"aiX"},"comparator":"!="},"rightValue":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"playerY"},"rightValue":{"head":"getNumericVariable","name":"aiY"},"comparator":"!="}},"rightValue":{"head":"stringCompare","leftValue":{"head":"get_direction_of_ship","shipId":{"head":"getStringVariable","name":"playerShipId"}},"rightValue":{"head":"getStringVariable","name":"expectedDir"},"comparator":"!="}}},"location":73}],"parameters":["dir","playerShipId","expectedDir"]},{"head":"function_definition","name":"isPMisplacedAfterTurn","body":[{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"left"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":-1}},"location":77},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":-1}},"location":78}],"orelse":null},"location":76},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"down"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":-1}},"location":80},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":1}},"location":81}],"orelse":null},"location":79},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"right"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":1}},"location":83},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":1}},"location":84}],"orelse":null},"location":82},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"up"},"comparator":"=="},"body":[{"statement":{"head":"setVariableNumeric","name":"x","value":{"head":"constant_number","value":1}},"location":86},{"statement":{"head":"setVariableNumeric","name":"y","value":{"head":"constant_number","value":-1}},"location":87}],"orelse":null},"location":85},{"statement":{"head":"setVariableNumeric","name":"playerX","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"x"}},"rightValue":{"head":"constant_number","value":0}}},"location":88},{"statement":{"head":"setVariableNumeric","name":"playerY","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"y"}},"rightValue":{"head":"constant_number","value":0}}},"location":89},{"statement":{"head":"setVariableNumeric","name":"aiX","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"position_value_relative","x":{"head":"getNumericVariable","name":"x"},"y":{"head":"getNumericVariable","name":"y"}},"coordinate":{"head":"constant_string","value":"x"}},"rightValue":{"head":"constant_number","value":0}}},"location":90},{"statement":{"head":"setVariableNumeric","name":"aiY","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"position_value_relative","x":{"head":"getNumericVariable","name":"x"},"y":{"head":"getNumericVariable","name":"y"}},"coordinate":{"head":"constant_string","value":"y"}},"rightValue":{"head":"constant_number","value":0}}},"location":91},{"statement":{"head":"function_return","value":{"head":"logic_binary","comparator":"or","leftValue":{"head":"logic_binary","comparator":"or","leftValue":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"playerX"},"rightValue":{"head":"getNumericVariable","name":"aiX"},"comparator":"!="},"rightValue":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"playerY"},"rightValue":{"head":"getNumericVariable","name":"aiY"},"comparator":"!="}},"rightValue":{"head":"stringCompare","leftValue":{"head":"get_direction_of_ship","shipId":{"head":"getStringVariable","name":"playerShipId"}},"rightValue":{"head":"getStringVariable","name":"dir"},"comparator":"!="}}},"location":92}],"parameters":["dir","playerShipId"]},{"head":"function_definition","name":"calculateTurnedDir","body":[{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"oldDir"},"rightValue":{"head":"constant_string","value":"left"},"comparator":"=="},"body":[{"statement":{"head":"function_return","value":{"head":"constant_string","value":"down"}},"location":96}],"orelse":null},"location":95},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"oldDir"},"rightValue":{"head":"constant_string","value":"down"},"comparator":"=="},"body":[{"statement":{"head":"function_return","value":{"head":"constant_string","value":"right"}},"location":98}],"orelse":null},"location":97},{"statement":{"head":"if","test":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"oldDir"},"rightValue":{"head":"constant_string","value":"right"},"comparator":"=="},"body":[{"statement":{"head":"function_return","value":{"head":"constant_string","value":"up"}},"location":100}],"orelse":null},"location":99},{"statement":{"head":"function_return","value":{"head":"constant_string","value":"left"}},"location":101}],"parameters":["oldDir"]},{"head":"function_definition","name":"isPlayerInFront","body":[{"statement":{"head":"setVariableNumeric","name":"playerX","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"x"}},"rightValue":{"head":"constant_number","value":0}}},"location":104},{"statement":{"head":"setVariableNumeric","name":"playerY","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"y"}},"rightValue":{"head":"constant_number","value":0}}},"location":105},{"statement":{"head":"if","test":{"head":"logic_binary","comparator":"or","leftValue":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"right"},"comparator":"=="},"rightValue":{"head":"stringCompare","leftValue":{"head":"getStringVariable","name":"dir"},"rightValue":{"head":"constant_string","value":"left"},"comparator":"=="}},"body":[{"statement":{"head":"if","test":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"playerY"},"rightValue":{"head":"get_position_coordinate","position":{"head":"position_value_relative","x":{"head":"constant_number","value":0},"y":{"head":"constant_number","value":0}},"coordinate":{"head":"constant_string","value":"y"}},"comparator":"=="},"body":[{"statement":{"head":"function_return","value":{"head":"constant_boolean","value":"true"}},"location":108}],"orelse":null},"location":107}],"orelse":{"statement":{"head":"else","body":[{"statement":{"head":"if","test":{"head":"numericCompare","leftValue":{"head":"getNumericVariable","name":"playerX"},"rightValue":{"head":"get_position_coordinate","position":{"head":"position_value_relative","x":{"head":"constant_number","value":0},"y":{"head":"constant_number","value":0}},"coordinate":{"head":"constant_string","value":"x"}},"comparator":"=="},"body":[{"statement":{"head":"function_return","value":{"head":"constant_boolean","value":"true"}},"location":111}],"orelse":null},"location":110}]},"location":109}},"location":106},{"statement":{"head":"function_return","value":{"head":"constant_boolean","value":"false"}},"location":112}],"parameters":["dir","playerShipId"]},{"head":"function_definition","name":"reactToMisplacedPlayer","body":[{"statement":{"head":"setVariableNumeric","name":"playerX","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"x"}},"rightValue":{"head":"constant_number","value":0}}},"location":115},{"statement":{"head":"setVariableNumeric","name":"playerY","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"y"}},"rightValue":{"head":"constant_number","value":0}}},"location":116},{"statement":{"head":"if","test":{"head":"function_call_boolean","name":"isPlayerInFront","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"body":[{"statement":{"head":"shoot"},"location":118}],"orelse":{"statement":{"head":"else","body":[{"statement":{"head":"right"},"location":120}]},"location":119}},"location":117}],"parameters":["dir","playerShipId"]},{"head":"function_definition","name":"reactToMisplacedPDuringTurn","body":[{"statement":{"head":"setVariableNumeric","name":"playerX","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"x"}},"rightValue":{"head":"constant_number","value":0}}},"location":123},{"statement":{"head":"setVariableNumeric","name":"playerY","value":{"head":"number_binary","operator":"+","leftValue":{"head":"get_position_coordinate","position":{"head":"get_ship_position","shipId":{"head":"getStringVariable","name":"playerShipId"}},"coordinate":{"head":"constant_string","value":"y"}},"rightValue":{"head":"constant_number","value":0}}},"location":124},{"statement":{"head":"if","test":{"head":"function_call_boolean","name":"isPlayerInFront","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"body":[{"statement":{"head":"shoot"},"location":126}],"orelse":{"statement":{"head":"else","body":[{"statement":{"head":"function_call_void","name":"startTurnEscapeHunt","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"location":128}]},"location":127}},"location":125}],"parameters":["dir","playerShipId"]},{"head":"function_definition","name":"startTurnEscapeHunt","body":[{"statement":{"head":"while","test":{"head":"constant_boolean","value":"true"},"body":[{"statement":{"head":"if","test":{"head":"function_call_boolean","name":"isPlayerInFront","parameters":[{"value":{"head":"getStringVariable","name":"dir"}},{"value":{"head":"getStringVariable","name":"playerShipId"}}]},"body":[{"statement":{"head":"shoot"},"location":133}],"orelse":{"statement":{"head":"else","body":[{"statement":{"head":"left"},"location":135}]},"location":134}},"location":132}]},"location":131}],"parameters":["dir","playerShipId"]}]`);
